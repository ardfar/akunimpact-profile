<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AkunImpact</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @font-face {
            font-family: "hsr-ui";
            src: url("assets/fonts/hsr-ui.ttf");
        }

        .hsr-card {
            font-family: "hsr-ui";
            height: auto;
            overflow: hidden;
        }

        .hsr-card.selected::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.3) 100%); /* Gold gradient */
            border-top-right-radius: 30px; /* Adjust as needed */
            border-bottom-left-radius: 7px;
            border-bottom-right-radius: 7px;
        }

        /* Styles for the small part */
        .corner-part {
            width: 5rem;
            height: 1.5rem;
            border-bottom-left-radius: 1.8rem;
            background: #efa525;
            display: flex;
            align-items: center;
            justify-content: center;
            visibility: hidden; /* Hide by default */
        }

        .corner-container {
            display: flex;
            align-items: center;
            justify-content: end;
        }

        .hsr-card.selected .corner-part {
            visibility: visible; /* Show only when selected */
        }

        .corner-part p {
            font-size: 1rem;
            color: black;
            margin: 0;
        }
    </style>
</head>
<body class="p-8 bg-gray-700">
    <div id="hsr-cards-container" class="flex flex-wrap justify-center gap-8"></div>

    <input type="hidden" class="h-[500px] w-[700px]" id="jsonDataHSRCharacter" name="jsonDataHSRCharacter" />

    <button onclick="extractData()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Extract Data</button>

    <script>
    const characters = {
            "acheron.webp": "Acheron",
            "argenti.webp": "Argenti",
            "aventurine.webp": "Aventurine",
            "bailu.webp": "Bailu",
            "black-swan.webp": "Black Swan",
            "blade.webp": "Blade",
            "bronya.webp": "Bronya",
            "clara.webp": "Clara",
            "dr-ratio.webp": "Dr. Ratio",
            "fu-xuan.webp": "Fu Xuan",
            "gepard.webp": "Gepard",
            "himeko.webp": "Himeko",
            "huohuo.webp": "Huohuo",
            "imbibitor-lunae.webp": "Imbibitor Lunae",
            "jing-yuan.webp": "Jing Yuan",
            "jingliu.webp": "Jingliu",
            "kafka.webp": "Kafka",
            "luocha.webp": "Luocha",
            "ruan-mei.webp": "Ruan Mei",
            "seele.webp": "Seele",
            "silver-wolf.webp": "Silver Wolf",
            "sparkle.webp": "Sparkle",
            "topaz.webp": "Topaz",
            "welt.webp": "Welt",
            "yanqing.webp": "Yanqing"
        };


        // Function to create a card element for each image
        function createCard(filename, characterName) {
            const cardContainer = document.getElementById("hsr-cards-container");

            const card = document.createElement("div");
            card.classList.add("hsr-card", "bg-gray-900", "text-white", "rounded-tr-[30px]", "rounded-b-[7px]", "w-52", "flex", "flex-col", "justify-between", "shadow-xl", "relative", "border-0", "border-red-500");
            card.setAttribute('data-clicks', '0');
            card.setAttribute('data-character-name', characterName); // Simpan nama karakter di sini
            card.onclick = function() { toggleSelected(this); };

            const cornerContainer = document.createElement('div');
            cornerContainer.classList.add('corner-container');
            const cornerPart = document.createElement('div');
            cornerPart.classList.add('corner-part', 'border-red-500');
            cornerContainer.appendChild(cornerPart);
            card.appendChild(cornerContainer);

            const imageContainer = document.createElement("div");
            imageContainer.classList.add("hsr-image-container", "flex-grow", "flex", "justify-center", "items-center", "border-0", "border-red-500");
            const image = document.createElement("img");
            image.src = `assets/images/games/hsr/characters/${filename}`;
            image.alt = "Character Image";
            image.classList.add("w-3/4", "rounded-full");
            imageContainer.appendChild(image);

            const footer = document.createElement("div");
            footer.classList.add("hsr-card-footer", "border-b-[7px]", "rounded-lg", "w-full", "border-[#E3B668]", "absolute", "bottom-0");
            const title = document.createElement("h3");
            title.classList.add( "text-xl", "text-center");
            title.textContent = characterName;
            footer.appendChild(title);

            card.appendChild(imageContainer);
            card.appendChild(footer);

            cardContainer.appendChild(card);
        }

        // Function to toggle the 'selected' class on click
        function toggleSelected(card) {
            const clicks = parseInt(card.getAttribute('data-clicks'));
            if (clicks % 7 === 0) {
                card.classList.remove('selected');
            } else {
                card.classList.add('selected');
                const count = (clicks % 7) === 0 ? 0 : clicks % 7;
                const letter = count === 0 ? '' : 'E';
                card.querySelector('.corner-part').innerHTML = `<p>${letter}${count}</p>`;
            }
            card.setAttribute('data-clicks', clicks + 1);
        }

        // Function to extract data from selected cards
        function extractData() {
            const selectedCards = document.querySelectorAll('.hsr-card.selected');
            const data = {
                characters: Array.from(selectedCards).map(card => ({
                    name: card.getAttribute('data-character-name'), // Ambil nama karakter langsung dari atribut data
                    enhancement: parseInt(card.getAttribute('data-clicks')) % 7
                }))
            };
            const jsonDataHSRCharacterInput = document.getElementById('jsonDataHSRCharacter');
            jsonDataHSRCharacterInput.value = JSON.stringify(data);
            console.log(jsonDataHSRCharacterInput.value); // Output JSON for debugging
        }

        // Create cards for each character when the page loads
        window.onload = function() {
            for (const [filename, characterName] of Object.entries(characters)) {
                createCard(filename, characterName);
            }
        };
    </script>
</body>
</html>
