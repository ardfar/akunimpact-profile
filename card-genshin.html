<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AkunImpact</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <style>
        .genshin-card {
            position: relative;
        }

        /* Container for the small part */
        .corner-container {
            position: absolute;
            top: 0;
            right: 0;
            z-index: 1; /* Ensure it's above the image */
        }

        /* Styles for the small part */
        .genshin-corner-part {
            width: 2rem;
            height: 2rem;
            border-bottom-left-radius: 10px;
            background: #a36b5e ;
            color: #edc681;
            display: flex;
            align-items: center;
            justify-content: center;
            visibility: hidden; /* Hide by default */
        }

        .genshin-card.selected .genshin-corner-part {
            visibility: visible; /* Show only when selected */
        }

        .genshin-corner-part p {
            font-size: 1rem;
            color: black;
            margin: 0;
        }
    </style>
</head>

<body class="bg-gray-500">
    <div id="imageContainer" class="flex flex-wrap justify-center relative">
        <!-- Images will be dynamically added here -->
    </div>

    <input type="hidden" class="h-[500px] w-[700px]" id="jsonDataGenshinCharacter" name="jsonDataGenshinCharacter" />

    <button onclick="extractData()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Extract Data</button>
    

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        const characters = {
            'albedo.webp': 'Albedo',
            'alhaitham.webp': 'Alhaitham',
            'arataki-itto.webp': 'Arataki Itto',
            'baizhu.webp': 'Baizhu',
            'chiori.webp': 'Chiori',
            'cyno.webp': 'Cyno',
            'dehya.webp': 'Dehya',
            'diluc.webp': 'Diluc',
            'eula.webp': 'Eula',
            'furina.webp': 'Furina',
            'ganyu.webp': 'Ganyu',
            'hu-tao.webp': 'Hu Tao',
            'jean.webp': 'Jean',
            'kaedehara-kazuha.webp': 'Kaedehara Kazuha',
            'kamisato-ayaka.webp': 'Kamisato Ayaka',
            'kamisato-ayato.webp': 'Kamisato Ayato',
            'keqing.webp': 'Keqing',
            'klee.webp': 'Klee',
            'lyney.webp': 'Lyney',
            'mona.webp': 'Mona',
            'nahida.webp': 'Nahida',
            'navia.webp': 'Navia',
            'neuvillette.webp': 'Neuvillette',
            'nilou.webp': 'Nilou',
            'qiqi.webp': 'Qiqi',
            'raiden-shogun.webp': 'Raiden Shogun',
            'sangonomiya-kokomi.webp': 'Sangonomiya Kokomi',
            'shenhe.webp': 'Shenhe',
            'tartaglia.webp': 'Tartaglia',
            'tighnari.webp': 'Tighnari',
            'venti.webp': 'Venti',
            'wanderer.webp': 'Wanderer',
            'wriothesley.webp': 'Wriothesley',
            'xianyun.webp': 'Xianyun',
            'xiao.webp': 'Xiao',
            'yae-miko.webp': 'Yae Miko',
            'yelan.webp': 'Yelan',
            'yoimiya.webp': 'Yoimiya',
            'zhongli.webp': 'Zhongli'
        };


// Function to fetch images from the JSON file
function fetchImages() {
    const imageContainer = document.getElementById('imageContainer');

    for (const [filename, characterName] of Object.entries(characters)) {
        const card = document.createElement('div');
        card.classList.add('genshin-card', 'bg-white', 'rounded-lg', 'w-[150px]', 'overflow-hidden', 'transition', 'duration-300', 'ease-in-out', 'cursor-pointer', 'm-2', 'flex', 'flex-col', 'items-center', 'justify-center');
        card.setAttribute('data-clicks', '0');
        card.setAttribute('data-character-name', characterName); // Simpan nama karakter di sini
        card.onclick = function() { toggleSelected(this); };

        const cornerContainer = document.createElement('div');
        cornerContainer.classList.add('corner-container');
        const cornerPart = document.createElement('div');
        cornerPart.classList.add('genshin-corner-part', 'border-red-600');
        cornerContainer.appendChild(cornerPart);
        card.appendChild(cornerContainer);

        const img = document.createElement('img');
        img.classList.add('w-full', 'border-0', 'border-red-600', 'h-[85%]', 'object-cover', 'bg-[#c7c7c7]');
        img.src = 'assets/images/games/genshin/characters/' + filename;
        img.alt = 'Character Image';

        const characterNameElement = document.createElement('p');
        characterNameElement.classList.add('font-bold', 'text-black', 'transition', 'duration-300', 'ease-in-out', 'text-center', 'bg-none', 'm-auto', 'border-0', 'border-red-600');
        characterNameElement.textContent = characterName;

        card.appendChild(img);
        card.appendChild(characterNameElement);
        imageContainer.appendChild(card);
    }
}

// Function to toggle the 'selected' class on click
function toggleSelected(card) {
    const clicks = parseInt(card.getAttribute('data-clicks'));
    var image = card.getElementsByTagName("img")[0]
    console.log("Click: ", clicks)
    
    if (clicks < 7){
        image.classList.remove("bg-[#c7c7c7]")
        image.classList.add("bg-[#efa525]")

        card.classList.add('selected');
        card.querySelector('.genshin-corner-part').innerHTML = `<p style="color: #edc681">C${clicks}</p>`;
    } else {
        image.classList.remove("bg-[#efa525]")
        image.classList.add("bg-[#c7c7c7]")

        card.classList.remove('selected');
        card.querySelector('.genshin-corner-part').innerHTML = '';
    }

    card.setAttribute('data-clicks', clicks < 7 ? clicks + 1 : 0);
}

// Function to extract data from selected cards
function extractData() {
    const selectedCards = document.querySelectorAll('.genshin-card.selected');
    const data = {
        characters: Array.from(selectedCards).map(card => ({
            name: card.getAttribute('data-character-name'), // Ambil nama karakter langsung dari atribut data
            enhancement: parseInt(card.getAttribute('data-clicks')) % 7
        }))
    };
    const jsonDataGenshinCharacterInput = document.getElementById('jsonDataGenshinCharacter');
    jsonDataGenshinCharacterInput.value = JSON.stringify(data);
    console.log(jsonDataGenshinCharacterInput.value); // Output JSON for debugging
}

// Fetch images when the page loads
window.onload = function() {
    fetchImages();
};
    </script>
</body>

</html>
